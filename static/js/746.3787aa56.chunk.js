"use strict";(self.webpackChunkreact_widget_template=self.webpackChunkreact_widget_template||[]).push([[411,746],{1358:(e,o,t)=>{t.d(o,{A:()=>l});t(5043);var s=t(8012),a=(t(4119),t(3637)),n=t(1397),r=t(4675),i=t(579);const l=()=>{const{handleDrop:e}=(0,s.A)(),{performSearch:o}=(0,r.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"droppable-container mt-4",children:[(0,i.jsx)(a.A,{style:{width:"90px",height:"90px"},src:"https://thewhitechamaleon.github.io/testrapp/images/drag.png",alt:"Data Collect",className:"search-icon"}),(0,i.jsx)("span",{className:"drag-and-drop-text",children:"Drag and Drop"}),(0,i.jsxs)("div",{className:"divider-container",children:[(0,i.jsx)("hr",{className:"divider"}),(0,i.jsx)("span",{className:"divider-text",children:"or"}),(0,i.jsx)("hr",{className:"divider"})]}),(0,i.jsx)(n.A,{onSearch:t=>{o(t,{title:"Search",role:"",mode:"furtive",default_with_precond:!0,precond:'flattenedtaxonomies:"types/VPMReference" OR flattenedtaxonomies:"types/Raw_Material" OR flattenedtaxonomies:"types/Document"',show_precond:!1,multiSel:!1,idcard_activated:!1,select_result_max_idcard:!1,itemViewClickHandler:"",search_delegation:"3dsearch"},(o=>{o&&o.length>0&&o[0].id?e([{objectId:o[0].id,objectType:o[0]["ds6w:type_value"]}]):console.warn("No objectId found in selected objects")}))}})]})})}},5362:(e,o,t)=>{t.d(o,{A:()=>d});var s=t(5043),a=t(8931),n=t(7111),r=t(3277),i=t(2725),l=t(579);const d=(0,s.forwardRef)(((e,o)=>{let{data:t,columns:d,addedItem:c,CAName:m,state:u}=e;const{showWarningToast:p}=(0,i.A)(),[g,S]=(0,s.useState)({});(0,s.useEffect)((()=>{S({})}),[t]);const h=()=>{const e=C.getSelectedRowModel().rows.map((e=>e.original["Available Plant"]));0!==e.length?(c(e),S({})):p(r.e1)};(0,s.useImperativeHandle)(o,(()=>({addPlant:h})));const R=(0,s.useMemo)((()=>[{id:"select",cell:e=>{let{row:o}=e;return(0,l.jsx)("input",{type:"checkbox",className:"form-check-input",checked:o.getIsSelected(),onChange:o.getToggleSelectedHandler()})}},...d]),[d]),C=(0,a.N4)({data:t,columns:R,state:{rowSelection:g},enableRowSelection:!0,onRowSelectionChange:S,getCoreRowModel:(0,n.HT)()});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{type:"button",className:"btn btn-outline-primary me-3",onClick:()=>{C.getRowModel().rows.forEach((e=>e.toggleSelected(!0)))},children:"Select All"}),(0,l.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{C.getRowModel().rows.forEach((e=>e.toggleSelected(!1)))},children:"Deselect All"})]}),C.getRowModel().rows.length>0?(0,l.jsx)("div",{className:"overflow-auto",style:{maxHeight:"60vh"},children:C.getRowModel().rows.map((e=>(0,l.jsxs)("div",{className:"p-3 border-bottom d-flex align-items-center",style:{backgroundColor:e.getIsSelected()?"#d5e8f2":"inherit"},children:[(0,l.jsx)("div",{className:"me-3",children:(0,a.Kv)(e.getVisibleCells()[0].column.columnDef.cell,e.getVisibleCells()[0].getContext())}),(0,l.jsx)("div",{children:e.original[d[0].accessorKey]})]},e.id)))}):(0,l.jsx)("p",{className:"text-muted p-3",children:"No data available"})]})}))},4428:(e,o,t)=>{t.d(o,{A:()=>p});var s=t(5043),a=t(3003),n=t(5645),r=(t(1584),t(314)),i=t(2725),l=t(3277),d=t(9379),c=t(2268),m=t(6047);const u=()=>{const{showErrorToast:e}=(0,i.A)(),o=(0,a.wA)(),t={ALLUSERSPROFILE:"C:\\ProgramData",API_URL:"http://localhost:5001/api/v1",APPDATA:"C:\\Users\\anand.kumar\\AppData\\Roaming",BABEL_ENV:"production",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_27696_NXSVPGCKAOVUPTAZ",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"IBLW5CD324RLWT",ComSpec:"C:\\Windows\\system32\\cmd.exe",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EFC_25468:"1",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",GIT_ASKPASS:"c:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass.sh",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\anand.kumar",LANG:"en_US.UTF-8",LOCALAPPDATA:"C:\\Users\\anand.kumar\\AppData\\Local",LOGONSERVER:"\\\\IBLW5CD324RLWT",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_PATH:"",npm_command:"run-script",npm_config_local_prefix:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1",npm_config_user_agent:"bun/1.2.6 npm/? node/v22.6.0 win32 x64",npm_execpath:"C:\\Users\\anand.kumar\\.bun\\bin\\bun.exe",npm_lifecycle_event:"build:jdi-bom",npm_lifecycle_script:"cross-env  WIDGET_ENTRY=jdiBom react-app-rewired build",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1\\package.json",npm_package_name:"react-widget-template",npm_package_version:"0.1.0",NUMBER_OF_PROCESSORS:"12",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1\\node_modules\\.bin;C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1\\node_modules\\.bin;C:\\Users\\anand.kumar\\Downloads\\node_modules\\.bin;C:\\Users\\anand.kumar\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Git\\cmd;C:\\Program Files\\nodejs\\;C:\\Users\\anand.kumar\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\anand.kumar\\AppData\\Local\\GitHubDesktop\\bin;C:\\Users\\anand.kumar\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Users\\anand.kumar\\.bun\\bin",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 154 Stepping 4, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"9a04",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",PWD:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1",QIP25468:"0",QIP27696:"0",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\Windows",TEMP:"C:\\Users\\ANAND~1.KUM\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.98.2",TMP:"C:\\Users\\ANAND~1.KUM\\AppData\\Local\\Temp",USERDNSDOMAIN:"SLKSOFT.COM",USERDOMAIN:"SLKSOFT",USERDOMAIN_ROAMINGPROFILE:"SLKSOFT",USERNAME:"anand.kumar",USERPROFILE:"C:\\Users\\anand.kumar",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-8a0bed2a85-sock",WIDGET_ENTRY:"jdiBom",windir:"C:\\Windows",ZES_ENABLE_SYSMAN:"1"}.REACT_APP_ENOVIA_BASE_URL;let s=window.widget.getValue("email");console.log("Email in useBOSWidget:",s);return{handleBOSWidget:async(s,a,r,i,u,p)=>{try{console.log("Object id is:",r),console.log("Object type is:",i),o((0,n.Ve)(!0));const v=await(0,c.I)();if(!v)return void e(l.rK);console.log("[useBOSWidget] CSRF Headers:",v);let A="".concat(t,"/resources/v1/modeler/documents/parentId/").concat(r,"?parentRelName=SpecificationDocument"),P="Document"===i?"to":"from",O="".concat(A,"&parentDirection=").concat(P),D=await(0,m.ui)("GET",O,"",v);if(console.log("SpecDetails Response:",D),D&&D.status&&D.output.data.length>0){var g,S,h,R;let w,E,f=D.output.data.map((e=>({id:e.id,title:e.dataelements.title&&""!==e.dataelements.title.trim()?e.dataelements.title:e.dataelements.secondaryTitle,revision:e.dataelements.revision,state:e.dataelements.stateNLS,name:e.dataelements.name})));if(console.log("[useBOSWidget] Extracted Spec Documents:",f),"Document"===i){const N={data:[]};f.forEach((e=>{const o={id:e.id,identifier:e.id,type:"VPMReference",source:"".concat(t),relativePath:"/resources/v1/modeler/dseng/dseng:EngItem/".concat(e.id)};N.data.push(o)}));const y="".concat(t,"/resources/v1/modeler/dslc/version/getGraph"),T=await(0,m.ui)("POST",y,N,v);function I(e){if(/^\d+$/.test(e))return parseInt(e,10);let o=0;for(let t=0;t<e.length;t++)o=26*o+(e.charCodeAt(t)-"A".charCodeAt(0)+1);return o}console.log("response is:",T),T.output.results.forEach((e=>{const o=e.versions.reduce(((e,o)=>I(o.revision)>I(e.revision)?o:e));f=f.map((t=>e.versions.some((e=>e.id===t.id))?(0,d.A)((0,d.A)({},t),{},{isLatestRevision:t.id===o.id?"TRUE":"FALSE"}):t))})),console.log("ChildObjectDocument is:",f)}"Document"===i?(E="https://emr-product-datahub-server-sap-stage.azurewebsites.net/bosAttribute/getLatestSpecItemDetails",w={SpecName:u,SpecRevision:p,Items:f.map((e=>({ItemName:e.name,ItemRevision:e.revision})))}):(E="https://emr-product-datahub-server-sap-stage.azurewebsites.net/bosAttribute/getLatestItemSpecDetails",w={ItemName:u,ItemRevision:p,Specifications:f.map((e=>({SpecName:e.name,SpecRevision:e.revision})))}),console.log("Requested Body is:",w);const b=await(0,m.Fd)("POST",E,w);console.log("the response from node API is:",b);let _=[];null!==b&&void 0!==b&&null!==(g=b.data)&&void 0!==g&&null!==(S=g.data)&&void 0!==S&&S.Specifications?b.data.data.Specifications.forEach((e=>{let o=f.find((o=>o.name===e.SpecName&&o.revision===e.SpecRevision));_.push({childState:(null===o||void 0===o?void 0:o.state)||"",childTitle:(null===o||void 0===o?void 0:o.title)||"",childLatest:(null===o||void 0===o?void 0:o.isLatestRevision)||"FALSE",childName:e.SpecName,childRevision:e.SpecRevision,PrintOnPurchaseOrderRequired:e.PrintOnPurchaseOrderRequired,PrintOnWorkOrderRequired:e.PrintOnWorkOrderRequired,WorkOrderDocumentRequired:e.WorkOrderDocumentRequired,PrintOnReportOrderRequired:e.PrintOnReportOrderRequired,"SAP/JDE":e["SAP/JDE"]})})):null!==b&&void 0!==b&&null!==(h=b.data)&&void 0!==h&&null!==(R=h.data)&&void 0!==R&&R.Items?b.data.data.Items.forEach((e=>{let o=f.find((o=>o.name===e.ItemName&&o.revision===e.ItemRevision));_.push({childState:(null===o||void 0===o?void 0:o.state)||"",childTitle:(null===o||void 0===o?void 0:o.title)||"",childName:e.ItemName,childRevision:e.ItemRevision,childLatest:(null===o||void 0===o?void 0:o.isLatestRevision)||"FALSE",PrintOnPurchaseOrderRequired:e.PrintOnPurchaseOrderRequired,PrintOnWorkOrderRequired:e.PrintOnWorkOrderRequired,WorkOrderDocumentRequired:e.WorkOrderDocumentRequired,PrintOnReportOrderRequired:e.PrintOnReportOrderRequired,"SAP/JDE":e["SAP/JDE"]})})):console.warn("[useBOSWidget] Unexpected API response format."),console.log("[useBOSWidget] Final Merged Data for Dispatch:",_),o((0,n.Xv)(_))}else console.warn("[useBOSWidget] No connected childs."),o((0,n.Xv)([]))}catch(C){throw console.error("[useBOSWidget] Error:",C),C}finally{o((0,n.Ve)(!1))}}}},p=()=>{const{showErrorToast:e}=(0,i.A)(),{handleBOSWidget:o}=u(),[t,d]=(0,s.useState)(!1),c=(0,a.wA)(),m=(0,s.useCallback)((async t=>{try{const i=await(0,r.Sj)({dataItems:t});if(i.success){c((0,n.um)({cardData:i.data.cardData}));const e=i.data.cardData;var s,a;if(console.log("[Dragged Items are]",e),c((0,n.Rr)(!0)),i)await o(e["Collaborative Space"],e["Maturity State"],null===(s=t[0])||void 0===s?void 0:s.objectId,null===(a=t[0])||void 0===a?void 0:a.objectType,e.Name,e["Dropped Revision"])}else e(l.wX)}catch(i){console.error("[FetchObjectDetails] Error fetching details:",i),e(l.wX)}finally{d(!1)}}),[c,o]),p=(0,s.useCallback)((async o=>{d(!0),console.log("[handleDrop] handleDrop called with dataItems:",o);try{o&&o.length>0?await m(o):console.warn("[handleDrop] No data items to process.")}catch(t){d(!1),console.error("[Drop] Error in handleDrop:",t),console.log("[handleDrop] Error in handleDrop, setting loading to false"),e(l.nz)}}),[m,e]);return{initializeDroppableArea:(0,s.useCallback)((()=>{c((0,n.Rr)(!1));const o=setInterval((()=>{const t=document.querySelector(".droppable-container");t&&(clearInterval(o),(0,r.pn)(t,p,c,e))}),100);return()=>clearInterval(o)}),[p,c]),loading:t,handleDrop:p}}},7119:(e,o,t)=>{t.r(o),t.d(o,{default:()=>f});var s=t(5043),a=t(4391),n=(t(2342),t(9555),t(3003)),r=t(7726),i=t(7488),l=(t(8421),t(4050),t(9959),t(9379)),d=t(1358),c=t(3637),m=t(6713),u=t(768),p=t(759),g=t(5645),S=t(579);var h=t(2725),R=(t(3127),t(3277)),C=t(4428);t(5362);const v=e=>{let{editableColumns:o,selectedRows:t,onApplyUpdate:a,valueOptions:n}=e;const[r,i]=(0,s.useState)(""),[l,d]=(0,s.useState)(""),c=e=>{r&&l?a(r,l,e?"all":"selected"):alert("Please select a column and a value.")};return(0,S.jsxs)("div",{className:"dropdown",children:[(0,S.jsx)("button",{className:"btn btn-outline-primary btn-lg m-2 dropdown-toggle",type:"button","data-bs-toggle":"dropdown",children:"Mass Update"}),(0,S.jsxs)("div",{className:"dropdown-menu p-3 ",style:{width:"300px"},children:[(0,S.jsx)("label",{children:"Select Column:"}),(0,S.jsxs)("select",{className:"form-select mb-2",onChange:e=>i(e.target.value),value:r,children:[(0,S.jsx)("option",{value:"",children:"-- Select Column --"}),o.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))]}),(0,S.jsx)("label",{children:"Select Value:"}),(0,S.jsxs)("select",{className:"form-select mb-2",value:l,onChange:e=>d(e.target.value),disabled:!r,children:[(0,S.jsx)("option",{value:"",children:"-- Select Value --"}),n.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))]}),(0,S.jsx)("button",{className:"btn btn-outline-success me-2 mb-2",onClick:()=>c(!1),disabled:!t.length,style:{cursor:t.length?"pointer":"not-allowed"},children:"Apply to Selected"}),(0,S.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>c(!0),children:"Apply to All"})]})]})},A=e=>{let{onSave:o,state:t,selectedRows:s,tableData:a,onMassUpdate:n,type:r,latestRevision:i,droppedRevision:l}=e;const{showWarningToast:d}=(0,h.A)();return(0,S.jsxs)("div",{className:"d-flex cta-absolute",children:[(0,S.jsx)("button",{className:"btn btn-outline-success btn-lg m-2",onClick:()=>{o?o():d("Document"!==r&&!i||i===l?R.EZ:R.nX)},children:"Save"}),(0,S.jsx)(v,{editableColumns:["Print On Purchase Order Required","Print On Work Order Required","Work Order Document Required","Print On report Order Required","SAP/JDE"],selectedRows:s,onApplyUpdate:(e,o,t)=>{"Document"!==r&&!i||i===l?d(R.EZ):n("selected"===t?s:a,e,o)},valueOptions:["Yes","No"]})]})};var P=t(6047);const O=()=>{const{initializeDroppableArea:e,loading:o}=(0,C.A)(),[t,a]=(0,s.useState)(0),[r,i]=(0,s.useState)([]),[v,O]=(0,s.useState)(!1),[D,w]=(0,s.useState)(!1),[E,f]=(0,s.useState)(!1),[b,_]=(0,s.useState)([]),N=(0,n.wA)(),{showSuccessToast:y,showErrorToast:T}=(0,h.A)();(0,s.useEffect)((()=>{b.length&&i(b.map((e=>(0,l.A)((0,l.A)({},e),{},{changedCells:{}}))))}),[b]);console.log("Table Data after Adding:",r);const I=(0,n.d4)((e=>e.droppedObject.selectedTableRows)),M=(0,n.d4)((e=>e.droppedObject.droppedObjectData));console.log("droppedObjectData",M);const x=(0,n.d4)((e=>e.droppedObject.loadingParentDetails));console.log("Parents Loading State:",x);const j=(0,n.d4)((e=>e.droppedObject.plantObjectData.proposedChanges));console.log("Proposed Changes are:",j);const L=(0,n.d4)((e=>e.droppedObject.isDropped)),W=(0,n.d4)((e=>e.droppedObject.BOSObjectData));console.log("Bos data in BOS Widget is:",W);const k=(0,n.d4)((e=>e.droppedObject.BOSObjectData.specDocument));console.log("BOSObjectData",k);const U=e=>{const o=e.map((e=>{const o=b.find((o=>o.Title===e.Title&&o.Revision===e.Revision));if(!o)return(0,l.A)((0,l.A)({},e),{},{changedCells:{}});const t={};return Object.keys(e).forEach((s=>{e[s]!==o[s]&&(t[s]=!0)})),(0,l.A)((0,l.A)({},e),{},{changedCells:t})}));i(o)};if(console.log("Table Data is:",r),(0,s.useEffect)((()=>{r.length>=0&&a((e=>e+1))}),[r]),M.cardData&&M.initialDraggedData)var F,V,B=M.cardData["Maturity State"],q=null===(F=M.initialDraggedData)||void 0===F||null===(V=F.data)||void 0===V?void 0:V.items[0].objectType;(0,s.useEffect)((()=>{L||e()}),[L,e]),(0,s.useEffect)((()=>{O(x)}),[x]);const G=(0,s.useMemo)((()=>((e,o)=>e?e.map((e=>{let t={Title:(null===e||void 0===e?void 0:e.childTitle)||"N/A",Revision:(null===e||void 0===e?void 0:e.childRevision)||"1",State:(null===e||void 0===e?void 0:e.childState)||"N/A","Print On Purchase Order Required":e.PrintOnPurchaseOrderRequired||"No","Print On Work Order Required":e.PrintOnWorkOrderRequired||"No","Work Order Document Required":e.WorkOrderDocumentRequired||"No","Print On report Order Required":e.PrintOnReportOrderRequired||"No","SAP/JDE":e["SAP/JDE"]||"No"};return"Document"===o&&(t.IsLatest=(null===e||void 0===e?void 0:e.childLatest)||"FALSE"),t})):[])(k,q)),[k,q]);(0,s.useEffect)((()=>{_(G)}),[G]),(0,s.useEffect)((()=>{G.length>=0&&(console.log("New Table Data:",G),i(G),a((e=>e+1)))}),[G]);const H=(0,s.useMemo)((()=>(e=>{if(!e||!e.cardData)return null;const o=e.cardData;let t={title:o.Title||"N/A",type:o.Type||"N/A","Maturity State":o["Maturity State"]||"N/A",owner:o.Owner||"N/A","Collaborative Space Title":o["Collaborative Space Title"]||"N/A",Description:o.Description||"N/A","Dropped Revision":o["Dropped Revision"]||"N/A","Latest Released Revision":o["Latest Released Revision"]||"N/A","CAD Format":o["CAD Format"]||"N/A",imageURL:o.imageURL||"https://oi000186152-us1-space.3dexperience.3ds.com/enovia/snresources/images/icons/large/I_VPMNavProduct108x144.png"};return"Document"!==o.Type&&(t.EIN=o.EIN||"N/A",t["CAD Format"]=o["CAD Format"]||"N/A"),t})(M)),[M]);console.log(H),(0,s.useEffect)((()=>{f(!!H)}),[H]);const K=(0,s.useMemo)((()=>((e,o,t)=>{const s=[{accessorKey:"Title",header:"Title"},{accessorKey:"Revision",header:"Revision"},{accessorKey:"State",header:"State"}];"Document"===e&&s.push({accessorKey:"IsLatest",header:"Is Latest"});const a=["Print On Purchase Order Required","Print On Work Order Required","Work Order Document Required","Print On report Order Required","SAP/JDE"].map((s=>({accessorKey:s,header:s,cell:a=>{let{row:n,getValue:r,table:i}=a;return("Document"===e?"FALSE"===n.original.IsLatest:o&&o!==t)?(0,S.jsx)("span",{children:r()}):(0,S.jsxs)("select",{value:r(),onChange:e=>{var o;const t=e.target.value,a=i.getRowModel().rows.map((e=>e.id===n.id?(0,l.A)((0,l.A)({},e.original),{},{[s]:t}):e.original));null===(o=i.options.meta)||void 0===o||o.updateTableData(a)},className:"appearance-none bg-transparent border-none cursor-pointer focus:outline-none",style:{width:"70%",padding:"5px",fontSize:"14px",background:"none",border:"none",textAlign:"left"},onMouseOver:e=>e.target.style.border="1px solid #ccc",onMouseOut:e=>e.target.style.border="none",children:[(0,S.jsx)("option",{value:"Yes",children:"Yes"}),(0,S.jsx)("option",{value:"No",children:"No"})]})}})));return[...s,...a]})(q,null===M||void 0===M?void 0:M.cardData["Latest Released Revision"],null===M||void 0===M?void 0:M.cardData["Dropped Revision"])),[q,null===M||void 0===M?void 0:M.cardData]);return(0,S.jsxs)(S.Fragment,{children:[D&&(0,S.jsxs)("div",{className:"loading-overlay",children:[(0,S.jsx)(m.A,{}),(0,S.jsx)("p",{children:"Saving..."})]}),!L&&!o&&!v&&(0,S.jsx)(d.A,{}),o&&(0,S.jsx)(m.A,{}),L&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"content-wrapper py-3 border-bottom",children:(0,S.jsxs)("div",{className:"d-flex ",children:[(0,S.jsx)("div",{className:" p-0 pt-4",children:(0,S.jsx)(c.A,{src:"https://thewhitechamaleon.github.io/testrapp/images/home.png",alt:"home-icon",className:"home-icon",onClick:()=>{e(),N((0,g.Rr)(!1)),N((0,g.um)({cardData:{},parentDetails:[],versions:[],initialDraggedData:[]})),N((0,g.Lq)({allPlants:[],initialAssignedPlants:[],uniquePlants:[],productChildren:[],CAName:!1,headers:{}})),i([]),f(!1)}})}),H&&(0,S.jsx)(p.A,{data:H})]})}),v?(0,S.jsx)("div",{className:"loading-indicator mt-5",children:(0,S.jsx)(m.A,{})}):(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"wrapper-cta",children:[(0,S.jsx)(A,{onSave:async()=>{console.log("Table Data is:",r),w(!0),console.log("Type of Parent:",q);let e,o,t=[];"Document"===q?(t={SpecName:M.cardData.Name,SpecRevision:M.cardData["Dropped Revision"]},e="ItemName",o="ItemRevision"):(console.log("It's a physical Product"),t={ItemName:M.cardData.Name,ItemRevision:M.cardData["Dropped Revision"]},e="SpecName",o="SpecRevision");const s=r.map((s=>{let a=k.find((e=>e.childTitle===s.Title&&e.childRevision===s.Revision));return(0,l.A)((0,l.A)({[e]:a?a.childName:null,[o]:s.Revision},t),{},{PrintOnPurchaseOrderRequired:s["Print On Purchase Order Required"],PrintOnWorkOrderRequired:s["Print On Work Order Required"],WorkOrderDocumentRequired:s["Work Order Document Required"],PrintOnReportOrderRequired:s["Print On report Order Required"],"SAP/JDE":s["SAP/JDE"]})}));s.sort(((e,o)=>e.SpecName!==o.SpecName?e.SpecName.localeCompare(o.SpecName):Number(e.SpecRevision)-Number(o.SpecRevision))),console.log("Formatted Data:",s);const a=await(0,P.Fd)("POST","https://emr-product-datahub-server-sap-stage.azurewebsites.net/bosAttribute/createORupdateDetails",s);console.log("the response from node API is:",a),200===a.status?(y(R.KF),_(r),w(!1)):(T(R.fm),w(!1))},type:q,latestRevision:null===M||void 0===M?void 0:M.cardData["Latest Released Revision"],droppedRevision:null===M||void 0===M?void 0:M.cardData["Dropped Revision"],selectedRows:I,state:B,tableData:r,onMassUpdate:async(e,o,t)=>{console.log("Data when the Mass Update is Clicked:",e),console.log("Columns to Change:",o),console.log("Value after change:",t);const s=e.map((e=>(0,l.A)((0,l.A)({},e),{},{[o]:t})));console.log("Updated Data is:",s),console.log("Table Data is:",r);const a=r.map((e=>{const o=s.find((o=>o.Title===e.Title&&o.Revision===e.Revision));return o||e}));console.log("Merged Data:",a),U(a)}}),(0,S.jsx)(u.A,{data:r,columns:K,meta:{updateTableData:U},widgetType:"Bos_Attribute_Widget"},t)]})})]})]})};var D=t(174);const w=()=>{const{handleDrop:e}=(0,C.A)(),{showSuccessToast:o,showErrorToast:t}=(0,h.A)(),[a,n]=(0,s.useState)(!1);console.log("---[WidgetLifecycle]--- starts");return(0,s.useEffect)((()=>{if(!window.widget)return;console.trace("[WidgetLifecycle] \ud83d\udd04 `onRefresh` was called from:"),window.widget.addEvent("onRefresh",(async()=>{var s,a;const i=(new Error).stack.split("\n"),l=sessionStorage.getItem("userClickedRefresh");if((e=>e.some((e=>e.includes("UWA_Frame_Alone.js")||e.includes("bundle-min.js"))))(i)&&!l)return void console.warn("[WidgetLifecycle] \u26d4 Auto-refresh detected. Ignoring unwanted `onRefresh`.");sessionStorage.removeItem("userClickedRefresh"),n(!0);const d=r.A.getState().droppedObject.droppedObjectData.initialDraggedData;if(null===d||void 0===d||null===(s=d.data)||void 0===s||null===(a=s.items)||void 0===a||!a.length)return console.error("[WidgetLifecycle] \u26a0\ufe0f `initialDraggedData` is missing or invalid:",d),void n(!1);try{await(0,D.M)(d.data.items,e)}catch(c){console.error("[WidgetLifecycle] \u274c Error during refresh:",c),t(R.H6)}finally{n(!1),o(R._l)}}))}),[]),a?(0,S.jsx)(m.A,{}):null};t(8885);let E=null;function f(){if(window.widget){let e=!1;window.widget.addEvent("onLoad",(()=>{e?console.warn("[index.js] \u23f3 onLoad was already executed. Ignoring duplicate trigger."):(e=!0,function(){var e,o;requirejs(["DS/PlatformAPI/PlatformAPI"],(e=>{window.PlatformAPI=e}));let t=(null===(e=window.widget)||void 0===e||null===(o=e.body)||void 0===o?void 0:o.querySelector("#root"))||document.getElementById("root");t||(t=document.createElement("div"),t.id="root",window.widget&&window.widget.body?window.widget.body.appendChild(t):document.body.appendChild(t)),E||(E=a.createRoot(t)),E.render((0,S.jsxs)(n.Kq,{store:r.A,children:[(0,S.jsx)(w,{}),(0,S.jsx)(O,{}),(0,S.jsx)(i.N9,{})]}))}())}))}else console.error("[index.js] \u274c Widget not detected! onLoad cannot be registered.")}!function(){if(window.parent&&window.parent.document){let e=window.parent.document.createElement("script");e.textContent='\n    function listenForRefreshClicks() {\n      // console.log("\ud83c\udf0d [Parent] Listening for manual refresh clicks...");\n\n      document.body.addEventListener("click", function (event) {\n        let refreshButton = event.target.closest("#refresh"); // Check if refresh was clicked\n\n        if (refreshButton) {\n          // console.log("\u2705 [Parent] User clicked Refresh!");\n          sessionStorage.setItem("userClickedRefresh", "true"); // Store flag\n          // console.log("Stored Flag:", sessionStorage.getItem("userClickedRefresh"));\n        }\n      }, true);\n    }\n\n    // \u2705 Ensure event listener is added even if DOM is already loaded\n    if (document.readyState === "loading") {\n      document.addEventListener("DOMContentLoaded", listenForRefreshClicks);\n    } else {\n      listenForRefreshClicks();\n    }\n  ',window.parent.document.body.appendChild(e)}else console.warn("\u26a0\ufe0f [index.js] Unable to inject script\u2014parent window not accessible.")}()},3127:(e,o,t)=>{t.d(o,{i:()=>r});var s=t(9379),a=t(9722),n=t(6047);const r=async(e,o,t,r,i,l,d,c,m,u,p)=>{try{const e={ALLUSERSPROFILE:"C:\\ProgramData",API_URL:"http://localhost:5001/api/v1",APPDATA:"C:\\Users\\anand.kumar\\AppData\\Roaming",BABEL_ENV:"production",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_27696_NXSVPGCKAOVUPTAZ",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"IBLW5CD324RLWT",ComSpec:"C:\\Windows\\system32\\cmd.exe",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EFC_25468:"1",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",GIT_ASKPASS:"c:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass.sh",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\anand.kumar",LANG:"en_US.UTF-8",LOCALAPPDATA:"C:\\Users\\anand.kumar\\AppData\\Local",LOGONSERVER:"\\\\IBLW5CD324RLWT",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_PATH:"",npm_command:"run-script",npm_config_local_prefix:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1",npm_config_user_agent:"bun/1.2.6 npm/? node/v22.6.0 win32 x64",npm_execpath:"C:\\Users\\anand.kumar\\.bun\\bin\\bun.exe",npm_lifecycle_event:"build:jdi-bom",npm_lifecycle_script:"cross-env  WIDGET_ENTRY=jdiBom react-app-rewired build",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1\\package.json",npm_package_name:"react-widget-template",npm_package_version:"0.1.0",NUMBER_OF_PROCESSORS:"12",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1\\node_modules\\.bin;C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1\\node_modules\\.bin;C:\\Users\\anand.kumar\\Downloads\\node_modules\\.bin;C:\\Users\\anand.kumar\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Git\\cmd;C:\\Program Files\\nodejs\\;C:\\Users\\anand.kumar\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\anand.kumar\\AppData\\Local\\GitHubDesktop\\bin;C:\\Users\\anand.kumar\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Users\\anand.kumar\\.bun\\bin",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 154 Stepping 4, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"9a04",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",PWD:"C:\\Users\\anand.kumar\\Downloads\\emr-revision-float 1",QIP25468:"0",QIP27696:"0",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\Windows",TEMP:"C:\\Users\\ANAND~1.KUM\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.98.2",TMP:"C:\\Users\\ANAND~1.KUM\\AppData\\Local\\Temp",USERDNSDOMAIN:"SLKSOFT.COM",USERDOMAIN:"SLKSOFT",USERDOMAIN_ROAMINGPROFILE:"SLKSOFT",USERNAME:"anand.kumar",USERPROFILE:"C:\\Users\\anand.kumar",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\anand.kumar\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-8a0bed2a85-sock",WIDGET_ENTRY:"jdiBom",windir:"C:\\Windows",ZES_ENABLE_SYSMAN:"1"}.REACT_APP_ENOVIA_BASE_URL;console.log("[Save Data] Starting data saving process..."),console.log("Type in Save Table Data:",c),console.log("Final aRRAY IS inside Save:",u),console.log("Proposed Changes in Save",p);const o=await(0,n.fV)(),t=async(e,t,a)=>(console.log("Fetching URL:",e),console.log("Request Body:",JSON.stringify(t,null,2)),new Promise(((n,i)=>{o.authenticatedRequest(e,{method:a,headers:(0,s.A)((0,s.A)({},r),{},{"Content-Type":"application/json"}),data:JSON.stringify(t),type:"json",onComplete:e=>{console.log("Response received:",e),n(e)},onFailure:e=>{console.error("Request failed:",e),i(e)}})}))),l=async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";console.log("Fetching URL:",e),console.log("Method is:"),console.log("Request Body:",JSON.stringify(o,null,2));try{const n=await(0,a.A)({url:e,method:t,headers:(0,s.A)((0,s.A)({},r),{},{"Content-Type":"application/json"}),data:o});return console.log("Response received:",n.data),n.data}catch(n){throw console.error("Request failed:",n),n}};let S=d.filter((e=>{if("released"===e.state.toLowerCase()){return!p.find((o=>o.identifier===e.id&&"modify"===o.action.toLowerCase()))}return!1}));console.log("NotPropagableChilds ARE :",S);let h=[];u.forEach((e=>{if(e.MBOMValue){let o=[];S.forEach((t=>{t.classes.includes(e.id)||o.push({childId:t.id,childName:t.name})})),o.length>0&&h.push({id:e.id,title:e.title,childs:o,type:e.Type})}}));let R="";console.log("ErrorObj IS",h),h.forEach((e=>{let o="";if(Array.isArray(e.childs)&&e.childs.every((e=>e.childName))){const t=e.childs.map((e=>e.childName)).join(", ");console.log("Chilld Titles are",t),o="new"!==e.type.toLowerCase()?"".concat(e.title," MBOM can't be Make due to unclassified child items: ").concat(t):"Unable to classify product ".concat(e.title," due to unclassified child items: ").concat(t),console.log("Message is:",o)}else o="Invalid child data for ".concat(e.title,".");R+="".concat(o,"\n")})),console.log(h),console.log("Concatenated Messages:\n",R);let C=u.filter((e=>"new"===e.Type.toLowerCase()&&!h.some((o=>o.id===e.id)))).map((e=>e.id));console.log("New Classes are:",C);let v={};u.forEach((e=>{!h.some((o=>o.id===e.id))&&("update"===e.Type.toLowerCase()||"new"===e.Type.toLowerCase()&&e.MBOMValue)&&(v[e.MBOMName]=e.MBOMValue)})),console.log("Update body is:",v);let A=u.filter((e=>e.MBOMValue&&!h.some((o=>o.id===e.id)))).map((e=>e.id));if(console.log("Propogateable classes are",A),C.length>0){let e="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/classifyProductToClass",o={id:i,type:c,classes:C,mode:"classifyParent"};const t=await l(e,o,"POST");console.log("classifyResponse:",JSON.stringify(t))}if(Object.keys(v).length>0){var g;const o="".concat(e,"/resources/v1/modeler/dslib/dslib:ClassifiedItem/").concat(i),s=await t(o,"","GET");console.log("CStamp Response:",s);let a=(null===(g=s.member[0])||void 0===g?void 0:g.cestamp)||"";v.cestamp=a;const n="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/updateClassificationAttribute?id=".concat(i);await l(n,v,"PATCH"),console.log("Updated database successfully.")}if(A.length>0&&d.length>0&&"VPMReference"===c){let e="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/classifyProductToClass",o={id:i,type:c,classes:A,childs:d,mode:"classifychilds"};const t=await l(e,o,"POST");console.log("child classifyResponse:",JSON.stringify(t))}if(m.length>0){let e="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/declassifyProductToClass",o={id:i,type:c,classes:m};const t=await l(e,o,"POST");console.log("declassifyResponse:",JSON.stringify(t))}return console.log("All classification API calls completed successfully."),{success:!0,message:"Data saved successfully",ErrorObj:h,Finalmessage:R}}catch(S){return console.error("Error occurred:",S),{success:!1,message:"Failed to save data",error:S}}}}}]);
//# sourceMappingURL=746.3787aa56.chunk.js.map