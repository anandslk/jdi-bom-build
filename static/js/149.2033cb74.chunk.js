"use strict";(self.webpackChunkreact_widget_template=self.webpackChunkreact_widget_template||[]).push([[149],{3215:(e,t,a)=>{a.d(t,{A:()=>p});var r=a(5043),n=a(174),s=a(2725),i=a(8012),o=a(3277),l=a(7726),c=a(6713),d=a(579);const p=()=>{const{handleDrop:e}=(0,i.A)(),{showSuccessToast:t,showErrorToast:a}=(0,s.A)(),[p,h]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(!window.widget)return;console.trace("[WidgetLifecycle] \ud83d\udd04 `onRefresh` was called from:"),window.widget.addEvent("onRefresh",(async()=>{var r,s;const i=(new Error).stack.split("\n"),c=sessionStorage.getItem("userClickedRefresh");if((e=>e.some((e=>e.includes("UWA_Frame_Alone.js")||e.includes("bundle-min.js"))))(i)&&!c)return void console.warn("[WidgetLifecycle] \u26d4 Auto-refresh detected. Ignoring unwanted `onRefresh`.");sessionStorage.removeItem("userClickedRefresh"),h(!0);const d=l.A.getState().droppedObject.droppedObjectData.initialDraggedData;if(null===d||void 0===d||null===(r=d.data)||void 0===r||null===(s=r.items)||void 0===s||!s.length)return console.error("[WidgetLifecycle] \u26a0\ufe0f `initialDraggedData` is missing or invalid:",d),void h(!1);try{await(0,n.M)(d.data.items,e)}catch(p){console.error("[WidgetLifecycle] \u274c Error during refresh:",p),a(o.H6)}finally{h(!1),t(o._l)}}))}),[]),p?(0,d.jsx)(c.A,{}):null}},1358:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);var r=a(8012),n=(a(4119),a(3637)),s=a(1397),i=a(4675),o=a(579);const l=()=>{const{handleDrop:e}=(0,r.A)(),{performSearch:t}=(0,i.A)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"droppable-container mt-4",children:[(0,o.jsx)(n.A,{style:{width:"90px",height:"90px"},src:"https://thewhitechamaleon.github.io/testrapp/images/drag.png",alt:"Data Collect",className:"search-icon"}),(0,o.jsx)("span",{className:"drag-and-drop-text",children:"Drag and Drop"}),(0,o.jsxs)("div",{className:"divider-container",children:[(0,o.jsx)("hr",{className:"divider"}),(0,o.jsx)("span",{className:"divider-text",children:"or"}),(0,o.jsx)("hr",{className:"divider"})]}),(0,o.jsx)(s.A,{onSearch:a=>{t(a,{title:"Search",role:"",mode:"furtive",default_with_precond:!0,precond:'flattenedtaxonomies:"types/VPMReference" OR flattenedtaxonomies:"types/Raw_Material" OR flattenedtaxonomies:"types/Document"',show_precond:!1,multiSel:!1,idcard_activated:!1,select_result_max_idcard:!1,itemViewClickHandler:"",search_delegation:"3dsearch"},(t=>{t&&t.length>0&&t[0].id?e([{objectId:t[0].id,objectType:t[0]["ds6w:type_value"]}]):console.warn("No objectId found in selected objects")}))}})]})})}},148:(e,t,a)=>{var r=a(5043),n=a(4391),s=a(3003),i=a(7488),o=a(7726),l=a(1358),c=a(759),d=a(3637),p=a(8012),h=a(6713),u=a(768),m=a(5645),g=a(9379),x=a(3910),v=a(7929),A=a(579);const j=()=>(0,A.jsx)(x.g,{icon:v.e68,className:"green-icon"}),f=()=>(0,A.jsx)(x.g,{icon:v.Jyw,className:"cross-icon"}),b=[{accessorKey:"EIN",header:"EIN",columnPinning:!0},{accessorKey:"Title",header:"Title"},{accessorKey:"Description",header:"Description"},{accessorKey:"Type",header:"Type"},{accessorKey:"Revision",header:"Revision"},{accessorKey:"Connected Child Revision",header:"Connected Revision"},{accessorKey:"Latest child connected",header:"latest Revision Connected",cell:e=>{let{cell:t}=e;return t.getValue()?(0,A.jsx)(j,{}):(0,A.jsx)(f,{})}},{accessorKey:"To-Be child connected",header:"Revision to-be Connected"},{accessorKey:"relationship",header:"Relationship"},{accessorKey:"State",header:"State"},{accessorKey:"Owner",header:"Owner"},{accessorKey:"CAD Format",header:"CAD Format"},{accessorKey:"Collabspace",header:"Collabspace"}];var y=a(3728),D=a(360),w=a(2725),N=a(3277),C=a(6047);var R=a(3215);const O=()=>{const{replaceRevisions:e}=(0,D.A)(),{showErrorToast:t}=(0,w.A)(),a=(0,s.d4)((e=>e.droppedObject.droppedObjectData)),r=(0,s.d4)((e=>e.droppedObject.selectedTableRows));return(0,A.jsx)("div",{className:"d-flex cta-absolute",children:(0,A.jsx)(y.A,{variant:"outline-secondary",className:"m-2",size:"lg",text:"Replace",onClick:async()=>{var n;if(!r||0===r.length)return void t(N.M9);const s=null===(n=a.parentDetails)||void 0===n?void 0:n.data;if(!s||0===s.length)return void t("No parent details available.");const i=r.filter((e=>"-"!==e["To-Be child connected"]));if(0===i.length)return void t(N.nm);const o=i.map((e=>s.find((t=>t["Dropped Revision ID"]===e["Dropped Revision ID"]))));if(o.some((e=>!e)))return void t("Could not find all corresponding parent details.");const l=await async function(){try{const e=await(0,C._3)();return(await e.getUser()).email}catch(e){return console.error("Error getting user email:",e),null}}();if(!l)throw new Error("User email not found.");const c=a.cardData;(await e(o,c,l)).success}})})},S=()=>{const{initializeDroppableArea:e,loading:t}=(0,p.A)(),a=(0,r.useRef)(0),n=(0,s.wA)(),{cardData:i,parentDetails:o,isDropped:x,initialDraggedData:v}=(0,s.d4)((e=>({cardData:e.droppedObject.droppedObjectData.cardData,parentDetails:e.droppedObject.droppedObjectData.parentDetails,isDropped:e.droppedObject.isDropped,initialDraggedData:e.droppedObject.droppedObjectData.initialDraggedData})),s.bN),j=(0,r.useRef)(!1);(0,r.useEffect)((()=>{j.current||(e(),j.current=!0)}),[e]);const f=(0,r.useMemo)((()=>((e,t)=>e&&Array.isArray(e.data)?e.data.map((e=>(0,g.A)({EIN:e.EIN||"N/A",Title:e.Title||"N/A",Description:e.Description||"N/A",Type:e.Type||"N/A",Revision:e["Dropped Revision"]||"N/A","Dropped Revision ID":e["Dropped Revision ID"]||"N/A","Connected Child Revision":e.connectedChildRev||"N/A","Latest child connected":!e.toBeChildRevConnected,"To-Be child connected":e.toBeChildRevConnected||"-",State:e["Maturity State"]||"N/A",Owner:e.Owner||"N/A","CAD Format":e["CAD Format"]||"N/A",Collabspace:e["Collaborative Space Title"]||"N/A"},"Document"===(null===t||void 0===t?void 0:t.Type)&&{relationship:e.relationship||"N/A"}))):(console.warn("[getTableData] \u26a0\ufe0f No parent details available. Returning empty array."),[]))(o,i)),[o,i]);(0,r.useEffect)((()=>{f.length>0&&console.log("[RevisionFloat] \ud83d\udcca optimizedTableData Updated:",f)}),[f]);const y=(0,r.useMemo)((()=>(e=>e&&"object"===typeof e?(0,g.A)({title:e.Title||"N/A",type:e.Type||"N/A","Maturity State":e["Maturity State"]||"N/A",owner:e.Owner||"N/A","Collaborative Space Title":e["Collaborative Space Title"]||"N/A",Description:e.Description||"N/A","Dropped Revision":e["Dropped Revision"]||"N/A","Latest Released Revision":e["Latest Released Revision"]||"N/A","CAD Format":e["CAD Format"]||"N/A",imageURL:e.imageURL||"https://oi000186152-us1-space.3dexperience.3ds.com/enovia/snresources/images/icons/large/I_VPMNavProduct108x144.png"},"Document"!==e.Type&&{EIN:e.EIN||"N/A","CAD Format":e["CAD Format"]||"N/A"}):null)(i)),[i]),D=(0,r.useCallback)((()=>{x&&(v.length||e(),n((0,m.Rr)(!1)),(i||o.length||v.length)&&(console.log("[handleHomeClick] \ud83d\uddd1 Dispatching reset action..."),n((0,m.um)({cardData:{},parentDetails:[],initialDraggedData:[]}))))}),[n,e,x,v,i,o]),w=(0,r.useMemo)((()=>"Document"===(null===i||void 0===i?void 0:i.Type)?b:b.filter((e=>"relationship"!==e.accessorKey))),[i]);return(0,r.useEffect)((()=>{console.log("[RevisionFloat] State Changes:",{loading:t,isDropped:x})}),[t,x]),(0,A.jsxs)(A.Fragment,{children:[!x&&!t&&(0,A.jsx)(l.A,{}),x&&(0,A.jsxs)(A.Fragment,{children:[t&&(0,A.jsx)(h.A,{}),(0,A.jsx)("div",{className:"content-wrapper py-3 border-bottom",children:(0,A.jsxs)("div",{className:"d-flex",children:[(0,A.jsx)("div",{className:"p-0 pt-4",children:(0,A.jsx)(d.A,{src:"https://thewhitechamaleon.github.io/testrapp/images/home.png",alt:"home-icon",className:"home-icon",onClick:D})}),y&&(0,A.jsx)(c.A,{data:y})]})}),f.length>0?(0,A.jsxs)("div",{className:"wrapper-cta",children:[(0,A.jsx)(O,{}),(0,A.jsx)(u.A,{data:f,columns:w,widgetType:"Revision_FLoat_Widget"},a.current)]}):(0,A.jsx)("div",{className:"no-data-banner",children:"No Parent object(s) found"})]})]})};a(2342),a(8421),a(9555),a(4050),a(9959);var T=a(4685);(0,n.createRoot)(document.getElementById("root")).render((0,A.jsx)(r.StrictMode,{children:(0,A.jsxs)(s.Kq,{store:o.A,children:[(0,A.jsx)(R.A,{}),(0,A.jsx)(T.A,{}),(0,A.jsx)(S,{}),(0,A.jsx)(i.N9,{})]})}))},4685:(e,t,a)=>{a.d(t,{r:()=>S,A:()=>T});var r=a(7055),n=a(5043),s=a(3969),i=a(4799),o=a(5974),l=a(13),c=a(1449),d=a(2097),p=a(4842),h=a(3759),u=a(579);const m=e=>{let{parentParts:t,sourceOrg:a,selectedItems:r}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(o.A,{spacing:3,children:[(0,u.jsxs)(s.A,{children:[(0,u.jsx)(p.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:"Parent item(s) to Assign:"}),(0,u.jsx)(p.A,{variant:"body1",sx:{marginBottom:2,whiteSpace:"pre-line"},children:t})]}),(0,u.jsxs)(s.A,{children:[(0,u.jsx)(p.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:"Source Organization:"}),(0,u.jsx)(p.A,{variant:"body1",sx:{marginBottom:2},children:a})]}),(0,u.jsxs)(s.A,{children:[(0,u.jsx)(p.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:"Items to be Processed:"}),r.length>0?(0,u.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,marginTop:1},children:r.map((e=>(0,u.jsx)(h.A,{label:e,color:"primary"},e)))}):(0,u.jsx)(p.A,{variant:"body2",color:"textSecondary",children:"No items selected."})]})]})})};var g=a(3546),x=a(3605),v=a(6020);const A=e=>{let{message:t}=e;return(0,u.jsxs)(i.A,{sx:{padding:4,width:"100%",maxWidth:600,borderRadius:4,boxShadow:3,textAlign:"center",backgroundColor:"#f5f5f5",border:"2px solid #3f51b5"},children:[(0,u.jsx)(s.A,{sx:{marginBottom:2},children:(0,u.jsx)(p.A,{variant:"h6",color:"primary",fontWeight:"bold",children:t})}),(0,u.jsx)(v.A,{color:"primary"})]})};function j(e){let{children:t,isOpen:a,onSubmit:r,onCancel:s,disabled:i,title:l}=e;const c=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const e=new AbortController,{signal:t}=e;return a&&window.addEventListener("mousedown",(function(e){c.current&&!c.current.contains(e.target)&&s()}),{signal:t}),()=>e.abort()}),[a,s]),(0,u.jsx)("div",{className:"flex justify-center items-center",children:(0,u.jsx)(g.N,{children:a&&(0,u.jsx)(x.P.div,{className:"fixed inset-0 flex items-center justify-center backdrop-blur-xs bg-black/30 z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,u.jsxs)(x.P.div,{ref:c,className:"bg-white rounded-2xl p-6 shadow-xl min-w-[70%] md:min-w-[40%] max-w-[60%]",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[(0,u.jsx)(p.A,{variant:"h5",sx:{fontWeight:"bold",textAlign:"center"},children:l}),i&&(0,u.jsx)("div",{className:"w-full flex justify-center py-4",children:(0,u.jsx)(A,{message:"Searching for parts..."})}),t,(0,u.jsxs)(o.A,{direction:"row",spacing:2,justifyContent:"flex-end",className:"pt-4",children:[(0,u.jsx)(d.A,{variant:"contained",color:"primary",onClick:r,disabled:i,children:"Confirm"}),(0,u.jsx)(d.A,{variant:"outlined",color:"secondary",onClick:s,disabled:i,children:"Cancel"})]})]})})})})}var f=a(3774),b=a(7122);const y=(0,f.eU)(!1);var D=a(9522),w=a(3768);var N=a(5906);const C=e=>{var t,a;let{selectedItems:n,onChange:o,disabled:c}=e;const d=e=>{!e||null!==n&&void 0!==n&&n.includes(e)||o([...n,e])},{data:m}=(0,D.Z6)({}),{data:g}=(0,D.sQ)({});return(0,u.jsxs)(s.A,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2},children:[(0,u.jsx)(N.A,{options:null!==(t=null===m||void 0===m?void 0:m.data)&&void 0!==t?t:[],onChange:(e,t)=>d(t),renderInput:e=>(0,u.jsx)(l.A,(0,r.A)((0,r.A)({},e),{},{label:"RDO Name (will appear in Selected Plants)",fullWidth:!0,variant:"outlined",disabled:c}))}),(0,u.jsx)(N.A,{options:null!==(a=null===g||void 0===g?void 0:g.data)&&void 0!==a?a:[],onChange:(e,t)=>d(t),renderInput:e=>(0,u.jsx)(l.A,(0,r.A)((0,r.A)({},e),{},{label:"Destination JDI Orgs (will appear in Selected Plants)",fullWidth:!0,variant:"outlined",disabled:c}))}),(0,u.jsx)(p.A,{variant:"caption",color:"textSecondary",children:"Selections from both fields will appear below."}),(0,u.jsxs)(i.A,{sx:{padding:2,borderRadius:2,boxShadow:2,maxHeight:200,overflowY:"auto"},children:[(0,u.jsx)(p.A,{variant:"subtitle1",sx:{fontWeight:"bold",marginBottom:2},children:"Selected Plants"}),(0,u.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,minHeight:20},children:n.map((e=>(0,u.jsx)(h.A,{label:e,onDelete:()=>{return t=e,void o(null===n||void 0===n?void 0:n.filter((e=>e!==t)));var t},color:"primary"},e)))})]})]})};var R=a(8012),O=a(3003);const S=()=>{(()=>{const{initializeDroppableArea:e}=(0,R.A)(),t=(0,n.useRef)(!1),a=(0,n.useCallback)((()=>{t.current||(e(),t.current=!0)}),[e]),r=(0,O.d4)((e=>e.droppedObject.isDropped),O.bN);(0,n.useEffect)((()=>{a(),console.info("[RevisionFloat] State Changes:",{isDropped:r})}),[a,r])})();const[e,t]=(0,n.useState)({}),[a,p]=(0,n.useState)({parentParts:"",sourceOrg:"",plants:[]}),h=(e,t)=>{p((a=>(0,r.A)((0,r.A)({},a),{},{[e]:t})))},{isOpen:g,setIsOpen:x}=(()=>{const[e,t]=(0,b.fp)(y);return{isOpen:e,setIsOpen:t}})(),v=()=>x(!1),[A,{isLoading:f}]=(0,D.nh)();return(0,u.jsxs)(s.A,{sx:{minHeight:"calc(100vh - 65px)",backgroundColor:"#eef2f6"},children:[(0,u.jsx)(j,{isOpen:g,title:"Confirm Your Submission",onSubmit:async()=>{const{data:e,error:t}=await A({parentPart:a.parentParts,sourceOrg:a.sourceOrg,plants:a.plants});t&&w.Ay.error(function(e){if(e&&"object"===typeof e&&"data"in e){const t=e;if("object"===typeof t.data&&null!==t.data&&"message"in t.data)return t.data.message}return"object"===typeof e&&null!==e&&"message"in e?(console.error(e),e.message):"An unexpected error occurred."}(t)),x(!1),w.Ay.success(e.message)},onCancel:v,disabled:f,children:(0,u.jsx)(m,{parentParts:a.parentParts,sourceOrg:a.sourceOrg,selectedItems:a.plants})}),(0,u.jsxs)(s.A,{sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",gap:4,minHeight:"calc(100vh - 200px)"},children:[(0,u.jsx)(i.A,{sx:{padding:4,width:"100%",maxWidth:600,borderRadius:4,boxShadow:3},children:(0,u.jsx)("form",{onSubmit:e=>{e.preventDefault();const r={};a.parentParts.trim()||(r.parentParts="Parent Part is required"),a.sourceOrg.trim()||(r.sourceOrg="Source org is required"),a.plants.length||(r.plants="Select either RDO Name or Destination JDI Org"),t(r),0===Object.keys(r).length&&x(!0)},children:(0,u.jsxs)(o.A,{spacing:3,children:[(0,u.jsx)(l.A,{label:"Parent item(s) to Assign",variant:"outlined",value:a.parentParts,onChange:e=>h("parentParts",e.target.value),error:!!e.parentParts,helperText:e.parentParts,fullWidth:!0}),(0,u.jsx)(l.A,{label:"Source Organization",variant:"outlined",value:a.sourceOrg,onChange:e=>h("sourceOrg",e.target.value),error:!!e.sourceOrg,helperText:e.sourceOrg,fullWidth:!0}),(0,u.jsx)(C,{selectedItems:a.plants,onChange:e=>h("plants",e),disabled:!1}),e.plants&&(0,u.jsx)(c.A,{severity:"error",children:e.plants}),(0,u.jsxs)(o.A,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,u.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",children:"Submit"}),(0,u.jsx)(d.A,{type:"button",variant:"outlined",color:"secondary",onClick:v,children:"Cancel"})]})]})})}),!1]})]})},T=S}}]);
//# sourceMappingURL=149.2033cb74.chunk.js.map