"use strict";(self.webpackChunkreact_widget_template=self.webpackChunkreact_widget_template||[]).push([[567],{6713:(e,t,r)=>{r.d(t,{A:()=>s});r(5043);var o=r(579);const s=()=>(0,o.jsx)("div",{className:"loader-container",children:(0,o.jsx)("div",{className:"loader"})})},1397:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(5043),s=r(1666),a=r(2691),n=r(4282),c=r(3910),l=r(7929),i=r(579);const d=e=>{let{onSearch:t,disabled:r}=e;const[d,u]=(0,o.useState)(""),h=(0,o.useRef)(null);return(0,i.jsxs)("div",{className:"search-content-container d-flex align-items-center",children:[(0,i.jsx)(c.g,{icon:l.$UM,onClick:()=>{d.trim()&&t(d)},className:"search-icon"}),(0,i.jsx)("span",{className:"ms-4 drag-and-drop-text flex-grow-1",children:(0,i.jsxs)(s.A,{children:[(0,i.jsx)(a.A.Control,{type:"text",ref:h,value:d,onChange:e=>{const t=e.target.value;u(t)},onKeyDown:e=>{"Enter"===e.key&&d.trim()&&t(d)},placeholder:"Search...",disabled:r}),d&&(0,i.jsx)(n.A,{variant:"btn-link",onClick:()=>{u(""),h.current.focus()},className:"clear-button",children:"\u2716"})]})})]})}},8012:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(5043),s=r(3003),a=r(5645),n=r(360),c=r(314),l=r(2725),i=r(3277);const d=()=>{const{showErrorToast:e}=(0,l.A)(),{fetchRevisionsAndParents:t}=(0,n.A)(),r=(0,s.wA)(),d=(0,s.d4)((e=>e.droppedObject.isDropped)),u=(0,s.d4)((e=>e.droppedObject.loading)),h=(0,o.useCallback)((async o=>{try{const l=await(0,c.Sj)({dataItems:o});if(l.success){var s,n;const e=l.data.cardData.relativePath,[c]=await Promise.all([t(null===(s=o[0])||void 0===s?void 0:s.objectId,null===(n=o[0])||void 0===n?void 0:n.objectType,e)]);r((0,a.um)({cardData:l.data.cardData,parentDetails:c||[]})),console.log("[fetchObjectDetails] \u2705 Redux store updated.")}else e(i.wX)}catch(l){console.error("[FetchObjectDetails] Error fetching details:",l),e(i.wX)}finally{console.log("[fetchObjectDetails] \ud83c\udfc1 Ensuring loading is reset."),r((0,a.r1)(!1))}}),[r,t,e]),p=(0,o.useCallback)((async t=>{console.log("[handleDrop] handleDrop called with dataItems:",t);try{if(t&&t.length>0){var o;const s=null===(o=t[0])||void 0===o?void 0:o.objectType;if(!["VPMReference","Document","Raw_Material"].includes(s))return void e(i.Zo);r((0,a.Rr)(!0)),console.log("[handleDrop] \ud83d\udd04 Force setting `loading = true`..."),r((0,a.r1)(!1)),setTimeout((()=>r((0,a.r1)(!0))),0),await h(t)}else console.warn("[handleDrop] No data items to process.")}catch(s){console.error("[Drop] Error in handleDrop:",s),r((0,a.r1)(!1)),console.log("[handleDrop] Error in handleDrop, setting loading to false"),e(i.nz)}}),[h,e]);return{initializeDroppableArea:(0,o.useCallback)((()=>{d?console.log("[initializeDroppableArea] \u23f3 isDropped is already true. Skipping reset."):(console.log("[initializeDroppableArea] \ud83d\ude80 Resetting isDropped to false..."),r((0,a.Rr)(!1)));const t=setInterval((()=>{const o=document.querySelector(".droppable-container");o&&(clearInterval(t),(0,c.pn)(o,p,r,e))}),100);return()=>clearInterval(t)}),[p,r]),loading:u,handleDrop:p}}},4675:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(9379),s=r(5043),a=r(6047);const n=()=>{const[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{const e=await(0,a.qZ)();n(e)}catch(e){console.error("[useInterComSearch] Error initializing InterCom:",e)}})()}),[]),(0,s.useEffect)((()=>()=>{e&&e.disconnect()}),[e]);return{performSearch:(0,s.useCallback)(((e,s,a)=>{var n;if(!r)return void console.warn("[useInterComSearch] InterCom is not loaded yet.");const c="socket"+(new Date).toISOString().replace(/[-:]/g,""),l=new r.Socket(c,{dispatchRetryInternal:0});l.subscribeServer("SearchComServer"),t(l),console.log("[useInterComSearch] performSearch called with:",e,s);const i=null===(n=window.widget)||void 0===n?void 0:n.id,d=(0,o.A)((0,o.A)({},s),{},{widget_id:i,app_socket_id:c,default_search_criteria:e});console.log("[useInterComSearch] Dispatching RegisterContext event with:",d),l.dispatchEvent("RegisterContext",d),l.dispatchEvent("InContextSearch",d);console.log("[useInterComSearch] Adding listener for Selected_Objects_search"),l.addListener("Selected_Objects_search",(e=>{console.log("[useInterComSearch] Search results received:",e),a&&a(e)}))}),[r])}}},360:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(2725),s=r(3862),a=r(3277);const n=()=>{const{showSuccessToast:e,showErrorToast:t}=(0,o.A)();return{fetchRevisionsAndParents:async(e,t,r)=>{if(!r)return void console.error("[Fetch Revisions] \u274c Missing relative path.");try{const o=await s.A.post("/revFloat/getParents",{data:{id:e,type:t,relativePath:r}});if(200===o.status){return o.data}throw new Error("[Fetch Revisions] HTTP error! status: ".concat(o.status))}catch(o){return console.error("[Fetch Revisions] \u274c Error occurred:",o),null}},replaceRevisions:async(r,o,n)=>{try{const t=await s.A.post("/revFloat/floatRevisions",{SelectedParents:r,DroppedData:o,userEmail:n});if(200===t.status)return console.log("Replacement successful:",t.data),e(a.hG),{success:!0};throw new Error("[Replacement API] HTTP error! status: ".concat(t.status))}catch(c){return console.error("Error during replacement:",c),t(a.mK),{success:!1,error:c.message}}}}}},2725:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(9379),s=r(3986),a=r(7488);const n=["message","type","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","pauseOnFocusLoss","draggable","theme","transition"],c=()=>{const e=e=>{let{message:t,type:r="default",position:c="top-right",autoClose:l=2e3,hideProgressBar:i=!1,closeOnClick:d=!0,pauseOnHover:u=!1,pauseOnFocusLoss:h=!1,draggable:p=!0,theme:g="light",transition:v=a.br}=e,f=(0,s.A)(e,n);(a.oR[r]||a.oR)(t,(0,o.A)({position:c,autoClose:l,hideProgressBar:i,closeOnClick:d,pauseOnHover:u,draggable:p,theme:g,transition:v},f))};return{showToast:e,showSuccessToast:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((0,o.A)({message:t,type:"success"},r))},showErrorToast:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((0,o.A)({message:t,type:"error"},r))},showInfoToast:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((0,o.A)({message:t,type:"info"},r))},showWarningToast:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((0,o.A)({message:t,type:"warn"},r))}}}},174:(e,t,r)=>{r.d(t,{M:()=>o});const o=async(e,t)=>{if(console.log("[refreshWidgetData] called with dataItems:",e),e&&0!==e.length)try{if("function"!==typeof t)throw new Error("[Refresh] handleDrop is not a function.");await t(e)}catch(r){console.error("[Refresh] Error during handleDrop execution:",r)}else console.warn("[Refresh] No dropped data available to refresh.")}},4119:()=>{}}]);
//# sourceMappingURL=567.391b08ea.chunk.js.map